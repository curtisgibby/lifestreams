const streamMargin=5,streamHeight=50,svgWidth=window.innerWidth-50,height=(streams.length+1)*(streamHeight+streamMargin),svg=d3.select("#svg1").attr("width",svgWidth).attr("height",height).style("background-color","#eee");let startDate=new Date,endDate=Date.parse("1970-01-01");for(const t of streams)for(const e of t.events)e.startDate||(e.startDate="1970-01-01"),parsedStartDate=Date.parse(e.startDate),parsedStartDate<startDate&&(startDate=parsedStartDate),e.endDate||(e.endDate=(new Date).toLocaleDateString()),parsedEndDate=Date.parse(e.endDate),parsedEndDate>endDate&&(endDate=parsedEndDate);const timeScale=d3.scaleTime().domain([new Date(startDate),new Date(endDate)]).range([0,svgWidth]),xAxis=d3.axisBottom().scale(timeScale);svg.append("g").call(xAxis);for(const t of streams){let e=t.index*(streamHeight+streamMargin);for(const a of t.events)a.endDate||(a.endDate=(new Date).toLocaleDateString()),svg.append("line").style("stroke",a.color||t.color).style("stroke-width",streamHeight).attr("x1",timeScale(Date.parse(a.startDate))).attr("y1",e).attr("x2",timeScale(Date.parse(a.endDate))).attr("y2",e)}